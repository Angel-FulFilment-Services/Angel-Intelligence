# ==============================================================================
# Angel Intelligence - Full Installation (Development / Standalone)
# ==============================================================================
# This file installs ALL dependencies for local development or standalone mode.
# For production Kubernetes, use modular files in requirements/ folder:
#   - requirements/api.txt          (API pod - ~200MB)
#   - requirements/worker.txt       (Worker pod - ~400MB) 
#   - requirements/transcription.txt (Transcription pod - ~4GB)
#
# See requirements/README.md for details.
# ==============================================================================

# ------------------------------------------------------------------------------
# Web Framework
# ------------------------------------------------------------------------------
fastapi==0.115.0
uvicorn[standard]==0.32.0
python-multipart==0.0.12
pydantic==2.10.0
pydantic-settings>=2.0.0
python-dotenv
httpx>=0.25.0  # HTTP client for service proxying

# ------------------------------------------------------------------------------
# Core Dependencies (PyTorch installed separately with CUDA)
# ------------------------------------------------------------------------------
numpy>=1.19.0,<2.0.0

# ------------------------------------------------------------------------------
# PyTorch - Install FIRST before other dependencies:
# pip install torch==2.5.1 torchvision==0.20.1 torchaudio==2.5.1 --index-url https://download.pytorch.org/whl/cu121
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# Audio Processing
# ------------------------------------------------------------------------------
ffmpeg-python==0.2.0
soundfile==0.12.1
scipy==1.14.1

# ------------------------------------------------------------------------------
# Storage and Database
# ------------------------------------------------------------------------------
boto3==1.35.74
mysql-connector-python==9.1.0
requests==2.32.3

# ------------------------------------------------------------------------------
# LLM and AI Models
# ------------------------------------------------------------------------------
# transformers installed via git below (Qwen2.5-Omni branch)
accelerate==1.1.1
huggingface-hub>=0.30.0
bitsandbytes==0.44.1
peft==0.13.2
datasets==3.1.0
json-repair==0.30.3

# ------------------------------------------------------------------------------
# Audio LLM (Qwen2.5-Omni-7B)
# Provides direct audio analysis for tone/emotion detection
# ------------------------------------------------------------------------------
# Install with:
# pip install git+https://github.com/huggingface/transformers@v4.51.3-Qwen2.5-Omni-preview
# pip install qwen-omni-utils[decord]

# ------------------------------------------------------------------------------
# PII Detection and Redaction (Presidio)
# ------------------------------------------------------------------------------
presidio-analyzer==2.2.355
presidio-anonymizer==2.2.355
spacy==3.7.6

git+https://github.com/huggingface/transformers@v4.51.3-Qwen2.5-Omni-preview
qwen-omni-utils==0.0.6

# Download spaCy model after install:
# python -m spacy download en_core_web_lg

# ------------------------------------------------------------------------------
# WhisperX - Speech Recognition
# Install last after all other dependencies
# ------------------------------------------------------------------------------
git+https://github.com/m-bain/whisperx.git

# ------------------------------------------------------------------------------
# Speaker Diarisation (requires HuggingFace token)
# ------------------------------------------------------------------------------
pyannote-audio==3.3.2

# ------------------------------------------------------------------------------
# RealtimeSTT - Live Speech Recognition
# ------------------------------------------------------------------------------
RealtimeSTT