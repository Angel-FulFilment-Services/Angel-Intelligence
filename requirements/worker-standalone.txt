# ==============================================================================
# Angel Intelligence - Standalone Worker Requirements (Local Models)
# ==============================================================================
# Full worker with LOCAL ML models (no shared services)
# Use this for single-node deployments or development
# Image size: ~8GB (includes torch, transformers, WhisperX)
#
# Build: docker build -f Dockerfile -t angel-intelligence:worker-full .
# Run:   python -m src.worker.worker

# Include base dependencies
-r base.txt

# ------------------------------------------------------------------------------
# Web Framework
# ------------------------------------------------------------------------------
fastapi==0.115.0
uvicorn[standard]==0.32.0
python-multipart==0.0.12
httpx==0.27.2

# ------------------------------------------------------------------------------
# Audio Processing
# ------------------------------------------------------------------------------
ffmpeg-python==0.2.0
soundfile==0.12.1
scipy==1.14.1

# ------------------------------------------------------------------------------
# Database & Storage
# ------------------------------------------------------------------------------
mysql-connector-python==9.1.0
boto3==1.35.74

# ------------------------------------------------------------------------------
# PyTorch - Install FIRST before other dependencies
# ------------------------------------------------------------------------------
# pip install torch==2.5.1 torchvision==0.20.1 torchaudio==2.5.1 --index-url https://download.pytorch.org/whl/cu121

# ------------------------------------------------------------------------------
# LLM and AI Models
# ------------------------------------------------------------------------------
accelerate==1.1.1
huggingface-hub>=0.30.0
bitsandbytes==0.44.1
peft==0.13.2
datasets==3.1.0
json-repair==0.30.3
safetensors>=0.4.0
tokenizers>=0.20.0

# Transformers (Qwen2.5-Omni branch for audio support):
# pip install git+https://github.com/huggingface/transformers@v4.51.3-Qwen2.5-Omni-preview
# pip install qwen-omni-utils[decord]

# ------------------------------------------------------------------------------
# WhisperX - Speech Recognition
# ------------------------------------------------------------------------------
faster-whisper==1.1.0
ctranslate2==4.4.0
# pip install git+https://github.com/m-bain/whisperx.git
pyannote-audio==3.3.2

# ------------------------------------------------------------------------------
# PII Detection and Redaction
# ------------------------------------------------------------------------------
presidio-analyzer==2.2.355
presidio-anonymizer==2.2.355
spacy==3.7.6
# python -m spacy download en_core_web_lg
