# ==============================================================================
# Angel Intelligence - Jetson Dependencies (Full Installation - Legacy)
# ==============================================================================
# This file is for standalone Jetson deployments with LOCAL models.
#
# For production Kubernetes with shared services, use modular files:
#   - requirements/worker.txt       (Worker pod - lightweight HTTP client)
#   - requirements/transcription.txt (Transcription pod - WhisperX)
#
# See requirements/README.md for details.
# ==============================================================================

# ------------------------------------------------------------------------------
# Core Dependencies (Python 3.8 compatible versions)
# ------------------------------------------------------------------------------
numpy>=1.19.0,<2.0.0
typing-extensions>=4.0.0  # FastAPI requires >=4.0.0, compatible with Python 3.8

# ------------------------------------------------------------------------------
# Web Framework
# ------------------------------------------------------------------------------
fastapi>=0.100.0,<0.116.0
uvicorn[standard]>=0.23.0,<0.33.0
python-multipart>=0.0.6

# ------------------------------------------------------------------------------
# Pydantic
# ------------------------------------------------------------------------------
pydantic>=2.0.0,<3.0.0
pydantic-settings>=2.0.0
python-dotenv>=1.0.0

# ------------------------------------------------------------------------------
# Core Utilities
# ------------------------------------------------------------------------------
requests>=2.31.0
httpx>=0.25.0  # HTTP client for service proxying

# ------------------------------------------------------------------------------
# Database
# ------------------------------------------------------------------------------
mysql-connector-python>=8.0.33

# ------------------------------------------------------------------------------
# Cloud Storage
# ------------------------------------------------------------------------------
boto3>=1.28.0

# ------------------------------------------------------------------------------
# Audio Processing (no torch/torchaudio - install separately)
# ------------------------------------------------------------------------------
ffmpeg-python>=0.2.0
soundfile>=0.12.1
scipy>=1.7.0,<1.10.0

# ------------------------------------------------------------------------------
# Quantization (optional, for reduced VRAM usage)
# ------------------------------------------------------------------------------
bitsandbytes>=0.43.0  # For int4/int8 quantization

# ------------------------------------------------------------------------------
# Transformers and ML (Qwen2.5-Omni requires special transformers branch)
# ------------------------------------------------------------------------------
# Install Qwen Omni transformers branch (replaces standard transformers)
git+https://github.com/huggingface/transformers@v4.51.3-Qwen2.5-Omni-preview
accelerate>=0.20.0
huggingface-hub>=0.16.0
tokenizers>=0.13.0
safetensors>=0.3.0
qwen-omni-utils

# ------------------------------------------------------------------------------
# PII Detection
# ------------------------------------------------------------------------------
presidio-analyzer>=2.2.0
presidio-anonymizer>=2.2.0
spacy>=3.5.0,<3.7.0

# Note: After installing these, run:
# python -m spacy download en_core_web_lg

# ------------------------------------------------------------------------------
# PyTorch Installation (do this BEFORE installing this file)
# ------------------------------------------------------------------------------
# Download and install PyTorch wheel for Jetson:
# wget https://developer.download.nvidia.com/compute/redist/jp/v511/pytorch/torch-2.0.0+nv23.05-cp38-cp38-linux_aarch64.whl
# pip install torch-2.0.0+nv23.05-cp38-cp38-linux_aarch64.whl
# pip install torchaudio==2.0.0

# ------------------------------------------------------------------------------
# WhisperX (optional - install after PyTorch)
# ------------------------------------------------------------------------------
# pip install git+https://github.com/m-bain/whisperx.git

# ------------------------------------------------------------------------------
# Voice Fingerprinting (DISABLED - causes build issues on Jetson)
# ------------------------------------------------------------------------------
# resemblyzer requires webrtcvad which needs C++ compiler
# Skip for now - voice fingerprinting will be disabled automatically
